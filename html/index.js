(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function l(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(s){if(s.ep)return;s.ep=!0;const r=l(s);fetch(s.href,r)}})();function q(){}const vl=e=>e;function ml(e,t){for(const l in t)e[l]=t[l];return e}function Qt(e){return e()}function mt(){return Object.create(null)}function de(e){e.forEach(Qt)}function et(e){return typeof e=="function"}function ke(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function bl(e){return Object.keys(e).length===0}function el(e,...t){if(e==null)return q;const l=e.subscribe(...t);return l.unsubscribe?()=>l.unsubscribe():l}function Q(e,t,l){e.$$.on_destroy.push(el(t,l))}function _l(e,t,l,n){if(e){const s=tl(e,t,l,n);return e[0](s)}}function tl(e,t,l,n){return e[1]&&n?ml(l.ctx.slice(),e[1](n(t))):l.ctx}function pl(e,t,l,n){if(e[2]&&n){const s=e[2](n(l));if(t.dirty===void 0)return s;if(typeof s=="object"){const r=[],i=Math.max(t.dirty.length,s.length);for(let o=0;o<i;o+=1)r[o]=t.dirty[o]|s[o];return r}return t.dirty|s}return t.dirty}function gl(e,t,l,n,s,r){if(s){const i=tl(t,l,n,r);e.p(i,s)}}function yl(e){if(e.ctx.length>32){const t=[],l=e.ctx.length/32;for(let n=0;n<l;n++)t[n]=-1;return t}return-1}function Ye(e){return e??""}function ll(e,t,l){return e.set(l),t}function bt(e){const t=typeof e=="string"&&e.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return t?[parseFloat(t[1]),t[2]||"px"]:[e,"px"]}const nl=typeof window<"u";let wl=nl?()=>window.performance.now():()=>Date.now(),ct=nl?e=>requestAnimationFrame(e):q;const Ae=new Set;function sl(e){Ae.forEach(t=>{t.c(e)||(Ae.delete(t),t.f())}),Ae.size!==0&&ct(sl)}function kl(e){let t;return Ae.size===0&&ct(sl),{promise:new Promise(l=>{Ae.add(t={c:e,f:l})}),abort(){Ae.delete(t)}}}function c(e,t){e.appendChild(t)}function il(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function $l(e){const t=v("style");return Ml(il(e),t),t.sheet}function Ml(e,t){return c(e.head||e,t),t.sheet}function U(e,t,l){e.insertBefore(t,l||null)}function C(e){e.parentNode&&e.parentNode.removeChild(e)}function Ue(e,t){for(let l=0;l<e.length;l+=1)e[l]&&e[l].d(t)}function v(e){return document.createElement(e)}function S(e){return document.createTextNode(e)}function $(){return S(" ")}function je(){return S("")}function ue(e,t,l,n){return e.addEventListener(t,l,n),()=>e.removeEventListener(t,l,n)}function d(e,t,l){l==null?e.removeAttribute(t):e.getAttribute(t)!==l&&e.setAttribute(t,l)}function Dl(e){return Array.from(e.childNodes)}function R(e,t){t=""+t,e.data!==t&&(e.data=t)}function ie(e,t,l){e.classList[l?"add":"remove"](t)}function Sl(e,t,{bubbles:l=!1,cancelable:n=!1}={}){const s=document.createEvent("CustomEvent");return s.initCustomEvent(e,l,n,t),s}const We=new Map;let Je=0;function El(e){let t=5381,l=e.length;for(;l--;)t=(t<<5)-t^e.charCodeAt(l);return t>>>0}function Al(e,t){const l={stylesheet:$l(t),rules:{}};return We.set(e,l),l}function _t(e,t,l,n,s,r,i,o=0){const u=16.666/n;let a=`{
`;for(let M=0;M<=1;M+=u){const g=t+(l-t)*r(M);a+=M*100+`%{${i(g,1-g)}}
`}const f=a+`100% {${i(l,1-l)}}
}`,h=`__svelte_${El(f)}_${o}`,y=il(e),{stylesheet:m,rules:p}=We.get(y)||Al(y,e);p[h]||(p[h]=!0,m.insertRule(`@keyframes ${h} ${f}`,m.cssRules.length));const _=e.style.animation||"";return e.style.animation=`${_?`${_}, `:""}${h} ${n}ms linear ${s}ms 1 both`,Je+=1,h}function Nl(e,t){const l=(e.style.animation||"").split(", "),n=l.filter(t?r=>r.indexOf(t)<0:r=>r.indexOf("__svelte")===-1),s=l.length-n.length;s&&(e.style.animation=n.join(", "),Je-=s,Je||Il())}function Il(){ct(()=>{Je||(We.forEach(e=>{const{ownerNode:t}=e.stylesheet;t&&C(t)}),We.clear())})}let Oe;function Pe(e){Oe=e}function ft(){if(!Oe)throw new Error("Function called outside component initialization");return Oe}function tt(e){ft().$$.on_mount.push(e)}function Cl(e){ft().$$.after_update.push(e)}function rl(e){ft().$$.on_destroy.push(e)}const Ee=[],pt=[];let Ne=[];const gt=[],Tl=Promise.resolve();let rt=!1;function Ul(){rt||(rt=!0,Tl.then(ol))}function ge(e){Ne.push(e)}const st=new Set;let De=0;function ol(){if(De!==0)return;const e=Oe;do{try{for(;De<Ee.length;){const t=Ee[De];De++,Pe(t),jl(t.$$)}}catch(t){throw Ee.length=0,De=0,t}for(Pe(null),Ee.length=0,De=0;pt.length;)pt.pop()();for(let t=0;t<Ne.length;t+=1){const l=Ne[t];st.has(l)||(st.add(l),l())}Ne.length=0}while(Ee.length);for(;gt.length;)gt.pop()();rt=!1,st.clear(),Pe(e)}function jl(e){if(e.fragment!==null){e.update(),de(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(ge)}}function Ll(e){const t=[],l=[];Ne.forEach(n=>e.indexOf(n)===-1?t.push(n):l.push(n)),l.forEach(n=>n()),Ne=t}let xe;function Rl(){return xe||(xe=Promise.resolve(),xe.then(()=>{xe=null})),xe}function it(e,t,l){e.dispatchEvent(Sl(`${t?"intro":"outro"}${l}`))}const Ge=new Set;let fe;function ye(){fe={r:0,c:[],p:fe}}function we(){fe.r||de(fe.c),fe=fe.p}function F(e,t){e&&e.i&&(Ge.delete(e),e.i(t))}function G(e,t,l,n){if(e&&e.o){if(Ge.has(e))return;Ge.add(e),fe.c.push(()=>{Ge.delete(e),n&&(l&&e.d(1),n())}),e.o(t)}else n&&n()}const xl={duration:0};function Ie(e,t,l,n){const s={direction:"both"};let r=t(e,l,s),i=n?0:1,o=null,u=null,a=null;function f(){a&&Nl(e,a)}function h(m,p){const _=m.b-i;return p*=Math.abs(_),{a:i,b:m.b,d:_,duration:p,start:m.start,end:m.start+p,group:m.group}}function y(m){const{delay:p=0,duration:_=300,easing:M=vl,tick:g=q,css:A}=r||xl,L={start:wl()+p,b:m};m||(L.group=fe,fe.r+=1),o||u?u=L:(A&&(f(),a=_t(e,i,m,_,p,M,A)),m&&g(0,1),o=h(L,_),ge(()=>it(e,m,"start")),kl(x=>{if(u&&x>u.start&&(o=h(u,_),u=null,it(e,o.b,"start"),A&&(f(),a=_t(e,i,o.b,o.duration,0,M,r.css))),o){if(x>=o.end)g(i=o.b,1-i),it(e,o.b,"end"),u||(o.b?f():--o.group.r||de(o.group.c)),o=null;else if(x>=o.start){const O=x-o.start;i=o.a+o.d*M(O/o.duration),g(i,1-i)}}return!!(o||u)}))}return{run(m){et(r)?Rl().then(()=>{r=r(s),y(m)}):y(m)},end(){f(),o=u=null}}}function Fl(e,t){G(e,1,1,()=>{t.delete(e.key)})}function Pl(e,t,l,n,s,r,i,o,u,a,f,h){let y=e.length,m=r.length,p=y;const _={};for(;p--;)_[e[p].key]=p;const M=[],g=new Map,A=new Map,L=[];for(p=m;p--;){const D=h(s,r,p),b=l(D);let N=i.get(b);N?n&&L.push(()=>N.p(D,t)):(N=a(b,D),N.c()),g.set(b,M[p]=N),b in _&&A.set(b,Math.abs(p-_[b]))}const x=new Set,O=new Set;function H(D){F(D,1),D.m(o,f),i.set(D.key,D),f=D.first,m--}for(;y&&m;){const D=M[m-1],b=e[y-1],N=D.key,P=b.key;D===b?(f=D.first,y--,m--):g.has(P)?!i.has(N)||x.has(N)?H(D):O.has(P)?y--:A.get(N)>A.get(P)?(O.add(N),H(D)):(x.add(P),y--):(u(b,i),y--)}for(;y--;){const D=e[y];g.has(D.key)||u(D,i)}for(;m;)H(M[m-1]);return de(L),M}function Ve(e){e&&e.c()}function Ce(e,t,l,n){const{fragment:s,after_update:r}=e.$$;s&&s.m(t,l),n||ge(()=>{const i=e.$$.on_mount.map(Qt).filter(et);e.$$.on_destroy?e.$$.on_destroy.push(...i):de(i),e.$$.on_mount=[]}),r.forEach(ge)}function Te(e,t){const l=e.$$;l.fragment!==null&&(Ll(l.after_update),de(l.on_destroy),l.fragment&&l.fragment.d(t),l.on_destroy=l.fragment=null,l.ctx=[])}function Bl(e,t){e.$$.dirty[0]===-1&&(Ee.push(e),Ul(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Le(e,t,l,n,s,r,i,o=[-1]){const u=Oe;Pe(e);const a=e.$$={fragment:null,ctx:[],props:r,update:q,not_equal:s,bound:mt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(u?u.$$.context:[])),callbacks:mt(),dirty:o,skip_bound:!1,root:t.target||u.$$.root};i&&i(a.root);let f=!1;if(a.ctx=l?l(e,t.props||{},(h,y,...m)=>{const p=m.length?m[0]:y;return a.ctx&&s(a.ctx[h],a.ctx[h]=p)&&(!a.skip_bound&&a.bound[h]&&a.bound[h](p),f&&Bl(e,h)),y}):[],a.update(),f=!0,de(a.before_update),a.fragment=n?n(a.ctx):!1,t.target){if(t.hydrate){const h=Dl(t.target);a.fragment&&a.fragment.l(h),h.forEach(C)}else a.fragment&&a.fragment.c();t.intro&&F(e.$$.fragment),Ce(e,t.target,t.anchor,t.customElement),ol()}Pe(u)}class Re{$destroy(){Te(this,1),this.$destroy=q}$on(t,l){if(!et(l))return q;const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(l),()=>{const s=n.indexOf(l);s!==-1&&n.splice(s,1)}}$set(t){this.$$set&&!bl(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function Fe(e,t){const l=n=>{const{action:s,data:r}=n.data;s===e&&t(r)};tt(()=>window.addEventListener("message",l)),rl(()=>window.removeEventListener("message",l))}const Se=[];function Ol(e,t){return{subscribe:ne(e,t).subscribe}}function ne(e,t=q){let l;const n=new Set;function s(o){if(ke(e,o)&&(e=o,l)){const u=!Se.length;for(const a of n)a[1](),Se.push(a,e);if(u){for(let a=0;a<Se.length;a+=2)Se[a][0](Se[a+1]);Se.length=0}}}function r(o){s(o(e))}function i(o,u=q){const a=[o,u];return n.add(a),n.size===1&&(l=t(s)||q),o(e),()=>{n.delete(a),n.size===0&&l&&(l(),l=null)}}return{set:s,update:r,subscribe:i}}function Vl(e,t,l){const n=!Array.isArray(e),s=n?[e]:e,r=t.length<2;return Ol(l,i=>{let o=!1;const u=[];let a=0,f=q;const h=()=>{if(a)return;f();const m=t(n?u[0]:u,i);r?i(m):f=et(m)?m:q},y=s.map((m,p)=>el(m,_=>{u[p]=_,a&=~(1<<p),o&&h()},()=>{a|=1<<p}));return o=!0,h(),function(){de(y),f(),o=!1}})}const pe=ne(!1),lt=ne(!1),ot=ne(""),qe=ne(null),al=ne(null),ul=ne(""),yt=ne(!1),wt=ne(!1),dt=ne(null),at=ne(!0),cl=ne(!0);function Hl(e){dt.update(t=>t.filter(l=>l.data.id!==e))}const Ke=ne(null),Xe=ne(null),kt=Vl([Ke,al,qe],([e,t,l])=>!e||t===null||!l?[]:e.slice(-t).filter(n=>n.message&&n.jobs.includes(l.job.type)).reverse());let ut=!1;lt.subscribe(e=>{ut=e});let fl="";ot.subscribe(e=>{fl=e});async function ae(e,t={},l){if(ut==!0&&l||ut==!0)return Promise.resolve(l||{});const n={method:"post",headers:{"Content-Type":"application/json; charset=UTF-8"},body:JSON.stringify(t)},s=window.GetParentResourceName?window.GetParentResourceName():fl;return await(await fetch(`https://${s}/${e}`,n)).json()}function $t(e){let t,l;const n=e[2].default,s=_l(n,e,e[1],null);return{c(){t=v("main"),s&&s.c(),d(t,"class","svelte-a4h32x")},m(r,i){U(r,t,i),s&&s.m(t,null),l=!0},p(r,i){s&&s.p&&(!l||i&2)&&gl(s,n,r,r[1],l?pl(n,r[1],i,null):yl(r[1]),null)},i(r){l||(F(s,r),l=!0)},o(r){G(s,r),l=!1},d(r){r&&C(t),s&&s.d(r)}}}function zl(e){let t,l,n=e[0]&&$t(e);return{c(){n&&n.c(),t=je()},m(s,r){n&&n.m(s,r),U(s,t,r),l=!0},p(s,[r]){s[0]?n?(n.p(s,r),r&1&&F(n,1)):(n=$t(s),n.c(),F(n,1),n.m(t.parentNode,t)):n&&(ye(),G(n,1,1,()=>{n=null}),we())},i(s){l||(F(n),l=!0)},o(s){G(n),l=!1},d(s){n&&n.d(s),s&&C(t)}}}function Gl(e,t,l){let n,s;Q(e,lt,u=>l(4,n=u)),Q(e,pe,u=>l(0,s=u));let{$$slots:r={},$$scope:i}=t,o;return pe.subscribe(u=>{o=u}),Fe("setVisible",u=>{pe.set(u)}),tt(()=>{const u=a=>{o&&a.code==="Escape"&&(ae("hideUI"),pe.set(!1)),!o&&a.code==="Escape"&&n&&(ae("setVisible",!0),pe.set(!0))};return window.addEventListener("keydown",u),()=>window.removeEventListener("keydown",u)}),e.$$set=u=>{"$$scope"in u&&l(1,i=u.$$scope)},[s,i,r]}class Yl extends Re{constructor(t){super(),Le(this,t,Gl,zl,ke,{})}}const Wl=()=>!window.invokeNative,Be=(e,t=0)=>{if(Wl())for(const l of e)setTimeout(()=>{window.dispatchEvent(new MessageEvent("message",{data:{action:l.action,data:l.data}}))},t)};function dl(e){const t=e-1;return t*t*t+1}function Ze(e,{delay:t=0,duration:l=400,easing:n=dl,x:s=0,y:r=0,opacity:i=0}={}){const o=getComputedStyle(e),u=+o.opacity,a=o.transform==="none"?"":o.transform,f=u*(1-i),[h,y]=bt(s),[m,p]=bt(r);return{delay:t,duration:l,easing:n,css:(_,M)=>`
			transform: ${a} translate(${(1-_)*h}${y}, ${(1-_)*m}${p});
			opacity: ${u-f*M}`}}function Mt(e,{delay:t=0,duration:l=400,easing:n=dl,axis:s="y"}={}){const r=getComputedStyle(e),i=+r.opacity,o=s==="y"?"height":"width",u=parseFloat(r[o]),a=s==="y"?["top","bottom"]:["left","right"],f=a.map(g=>`${g[0].toUpperCase()}${g.slice(1)}`),h=parseFloat(r[`padding${f[0]}`]),y=parseFloat(r[`padding${f[1]}`]),m=parseFloat(r[`margin${f[0]}`]),p=parseFloat(r[`margin${f[1]}`]),_=parseFloat(r[`border${f[0]}Width`]),M=parseFloat(r[`border${f[1]}Width`]);return{delay:t,duration:l,easing:n,css:g=>`overflow: hidden;opacity: ${Math.min(g*20,1)*i};${o}: ${g*u}px;padding-${a[0]}: ${g*h}px;padding-${a[1]}: ${g*y}px;margin-${a[0]}: ${g*m}px;margin-${a[1]}: ${g*p}px;border-${a[0]}-width: ${g*_}px;border-${a[1]}-width: ${g*M}px;`}}function Dt(e,t,l){const n=e.slice();return n[7]=t[l],n}function St(e,t,l){const n=e.slice();return n[10]=t[l],n}function Et(e){let t,l=e[1],n=[];for(let s=0;s<l.length;s+=1)n[s]=Nt(Dt(e,l,s));return{c(){t=v("div");for(let s=0;s<n.length;s+=1)n[s].c();d(t,"class","w-fit h-fit bg-[#25303B] p-2")},m(s,r){U(s,t,r);for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(t,null)},p(s,r){if(r&2){l=s[1];let i;for(i=0;i<l.length;i+=1){const o=Dt(s,l,i);n[i]?n[i].p(o,r):(n[i]=Nt(o),n[i].c(),n[i].m(t,null))}for(;i<n.length;i+=1)n[i].d(1);n.length=l.length}},d(s){s&&C(t),Ue(n,s)}}}function At(e){let t,l=e[10].name+"",n,s,r;function i(){return e[3](e[10])}return{c(){t=v("button"),n=S(l),d(t,"class","bg-[#0098A3] text-white p-2")},m(o,u){U(o,t,u),c(t,n),s||(r=ue(t,"click",i),s=!0)},p(o,u){e=o},d(o){o&&C(t),s=!1,r()}}}function Nt(e){let t,l,n=e[7].component+"",s,r,i,o=e[7].actions,u=[];for(let a=0;a<o.length;a+=1)u[a]=At(St(e,o,a));return{c(){t=v("div"),l=v("p"),s=S(n),r=$();for(let a=0;a<u.length;a+=1)u[a].c();i=$(),d(l,"class","text-white mr-4"),d(t,"class","flex flex-row gap-2 items-center")},m(a,f){U(a,t,f),c(t,l),c(l,s),c(t,r);for(let h=0;h<u.length;h+=1)u[h]&&u[h].m(t,null);c(t,i)},p(a,f){if(f&2){o=a[7].actions;let h;for(h=0;h<o.length;h+=1){const y=St(a,o,h);u[h]?u[h].p(y,f):(u[h]=At(y),u[h].c(),u[h].m(t,i))}for(;h<u.length;h+=1)u[h].d(1);u.length=o.length}},d(a){a&&C(t),Ue(u,a)}}}function Jl(e){let t,l,n,s,r,i=e[0]&&Et(e);return{c(){t=v("div"),l=v("button"),l.textContent="Show",n=$(),i&&i.c(),d(l,"class","bg-[#232B33] text-white p-2 font-medium"),d(t,"class","absolute top-0 z-[1000]")},m(o,u){U(o,t,u),c(t,l),c(t,n),i&&i.m(t,null),s||(r=ue(l,"click",e[2]),s=!0)},p(o,[u]){o[0]?i?i.p(o,u):(i=Et(o),i.c(),i.m(t,null)):i&&(i.d(1),i=null)},i:q,o:q,d(o){o&&C(t),i&&i.d(),s=!1,r()}}}function ql(e,t,l){let n=!1;const s={dispatch_detach:"Detach",dispatch_attach:"Attach",unit:"Unit",units:"Units",additionals:"More Units"},r={citizenid:"DEV123",job:{type:"police",name:"LSPD"},charinfo:{firstname:"Dev",lastname:"Officer"},metadata:{callsign:"1-Adam-1"}},i=[{id:1,message:"Armed Robbery in Progress",code:"10-31",icon:"fas fa-gun",time:Date.now()-3e5,priority:1,street:"Grove Street",coords:[-1234.56,7890.12],gender:"Male",automaticGunFire:!1,weapon:"Pistol",units:[],name:"John Doe",number:"555-0123",information:"Suspect wearing black hoodie",vehicle:"Sedan",color:"Black",plate:"ABC123",class:"Compact",doors:"4",heading:"North",jobs:["police","sheriff"]},{id:2,message:"Traffic Stop",code:"10-54",icon:"fas fa-car",time:Date.now()-6e5,priority:3,street:"Main Street",coords:[-1100.25,7500.75],gender:"Female",automaticGunFire:!1,weapon:"",units:[r],name:"Jane Smith",number:"555-0456",information:"Speeding violation",vehicle:"SUV",color:"Red",plate:"XYZ789",class:"SUV",doors:"4",heading:"South",jobs:["police"]}];return[n,[{component:"Show",actions:[{name:"Show Dispatch",custom:!0,customFunction:()=>{Be([{action:"setBrowserMode",data:!0},{action:"setupUI",data:{player:r,locales:s,keybind:"G",maxCallList:10,shortCalls:!0}},{action:"setDispatchs",data:i},{action:"setVisible",data:!0}],100),console.log("Debug: All systems initialized")}},{name:"Add New Call",custom:!0,customFunction:()=>{const f={id:Math.floor(Math.random()*1e3)+100,message:["Armed Robbery","Traffic Accident","Domestic Violence","Burglary","Drug Deal"][Math.floor(Math.random()*5)],code:"10-"+(Math.floor(Math.random()*99)+10),icon:"fas fa-exclamation-triangle",time:Date.now(),priority:Math.floor(Math.random()*3)+1,street:"Test Street "+Math.floor(Math.random()*50),coords:[Math.random()*2e3-1e3,Math.random()*2e3-1e3],gender:["Male","Female"][Math.floor(Math.random()*2)],automaticGunFire:Math.random()>.8,weapon:["Pistol","Knife","Rifle","None"][Math.floor(Math.random()*4)],units:[],name:"Test Person "+Math.floor(Math.random()*100),number:"555-"+Math.floor(Math.random()*9999).toString().padStart(4,"0"),information:"Random test incident",vehicle:["Sedan","SUV","Truck","Motorcycle"][Math.floor(Math.random()*4)],color:["Black","White","Red","Blue","Silver"][Math.floor(Math.random()*5)],plate:Math.random().toString(36).substr(2,7).toUpperCase(),class:"Standard",doors:"4",heading:["North","South","East","West"][Math.floor(Math.random()*4)],jobs:["police"]},h=[...i,f];i.push(f),Be([{action:"setDispatchs",data:h}]),console.log("Debug: New call added",f),console.log("Debug: Total calls now:",h.length)}}]}],()=>{l(0,n=!n)},f=>{if(f.custom==!0){f.customFunction();return}Be([{action:f.action,data:f.data}])}]}class Kl extends Re{constructor(t){super(),Le(this,t,ql,Jl,ke,{})}}function Xl(e,t,l){let n;Q(e,pe,r=>l(0,n=r)),Be([{action:"setVisible",data:!0}]),Be([{action:"setBrowserMode",data:!0}]);function s(r){r.key==="="&&ll(pe,n=!0,n)}return Fe("setBrowserMode",r=>{lt.set(r),console.log("browser mode enabled"),r?window.addEventListener("keydown",s):window.removeEventListener("keydown",s)}),Fe("newCall",r=>{dt.update(i=>(i=i||[],i.push(r),i))}),Fe("setDispatchs",r=>{Ke.set(r)}),Fe("setupUI",r=>{qe.set(r.player),Xe.set(r.locales),ul.set(r.keybind),al.set(r.maxCallList),cl.set(r.shortCalls)}),[]}class Zl extends Re{constructor(t){super(),Le(this,t,Xl,null,ke,{})}}const Ql=["January","February","March","April","May","June","July","August","September","October","November","December"];function ze(e,t=!1,l=!1){const n=e.getDate(),s=Ql[e.getMonth()],r=e.getFullYear(),i=e.getHours();let o=e.getMinutes();return o<10&&(o=`0${o}`),t?`${t} at ${i}:${o}`:l?`${n}. ${s} at ${i}:${o}`:`${n}. ${s} ${r}. at ${i}:${o}`}function Qe(e){if(!e)return"Unknown";let t;try{t=typeof e=="object"?e:new Date(e)}catch{return"Invalid date"}if(isNaN(t))return"Invalid date";const l=864e5,n=new Date,s=new Date(n-l),r=Math.round((n-t)/1e3),i=Math.round(r/60),o=n.toDateString()===t.toDateString(),u=s.toDateString()===t.toDateString(),a=n.getFullYear()===t.getFullYear();return r<5?"Just Now":r<60?`${r} Seconds ago`:r<90?"A minute ago":i<60?`${i} Minutes ago`:o?ze(t,"Today"):u?ze(t,"Yesterday"):a?ze(t,!1,!0):ze(t)}function It(e,t,l){const n=e.slice();return n[21]=t[l],n[23]=l,n}function Ct(e,t,l){const n=e.slice();return n[24]=t[l],n}function Tt(e,t,l){const n=e.slice();return n[27]=t[l],n}function en(e){let t;return{c(){t=v("div"),t.innerHTML=`<div class="bg-slate-900 border-l-4 border-blue-500 p-[3vh] text-center"><i class="fas fa-radio text-[4vh] text-slate-600 mb-[1vh]"></i> 
            <h3 class="text-slate-400 font-medium text-[1.6vh] mb-[0.5vh]">No Active Dispatches</h3> 
            <p class="text-slate-500 text-[1.2vh]">All units on standby</p></div>`,d(t,"class","flex flex-col items-center justify-center h-full text-center py-[4vh]")},m(l,n){U(l,t,n)},p:q,i:q,o:q,d(l){l&&C(t)}}}function tn(e){let t,l,n=e[5],s=[];for(let i=0;i<n.length;i+=1)s[i]=Vt(It(e,n,i));const r=i=>G(s[i],1,1,()=>{s[i]=null});return{c(){for(let i=0;i<s.length;i+=1)s[i].c();t=je()},m(i,o){for(let u=0;u<s.length;u+=1)s[u]&&s[u].m(i,o);U(i,t,o),l=!0},p(i,o){if(o&18339){n=i[5];let u;for(u=0;u<n.length;u+=1){const a=It(i,n,u);s[u]?(s[u].p(a,o),F(s[u],1)):(s[u]=Vt(a),s[u].c(),F(s[u],1),s[u].m(t.parentNode,t))}for(ye(),u=n.length;u<s.length;u+=1)r(u);we()}},i(i){if(!l){for(let o=0;o<n.length;o+=1)F(s[o]);l=!0}},o(i){s=s.filter(Boolean);for(let o=0;o<s.length;o+=1)G(s[o]);l=!1},d(i){Ue(s,i),i&&C(t)}}}function Ut(e){let t,l,n,s,r=e[21].street+"",i;return{c(){t=v("div"),l=v("i"),n=$(),s=v("span"),i=S(r),d(l,"class","fas fa-map-marker-alt text-[0.9vh] w-[1vh]"),d(s,"class","truncate"),d(t,"class","flex items-center gap-[0.3vh]")},m(o,u){U(o,t,u),c(t,l),c(t,n),c(t,s),c(s,i)},p(o,u){u&32&&r!==(r=o[21].street+"")&&R(i,r)},d(o){o&&C(t)}}}function jt(e){let t,l,n,s,r=e[21].name+"",i;return{c(){t=v("div"),l=v("i"),n=$(),s=v("span"),i=S(r),d(l,"class","fas fa-user text-[0.9vh] w-[1vh]"),d(s,"class","truncate"),d(t,"class","flex items-center gap-[0.3vh]")},m(o,u){U(o,t,u),c(t,l),c(t,n),c(t,s),c(s,i)},p(o,u){u&32&&r!==(r=o[21].name+"")&&R(i,r)},d(o){o&&C(t)}}}function Lt(e){let t,l,n,s,r=e[21].vehicle+"",i;return{c(){t=v("div"),l=v("i"),n=$(),s=v("span"),i=S(r),d(l,"class","fas fa-car text-[0.9vh] w-[1vh]"),d(s,"class","truncate"),d(t,"class","flex items-center gap-[0.3vh]")},m(o,u){U(o,t,u),c(t,l),c(t,n),c(t,s),c(s,i)},p(o,u){u&32&&r!==(r=o[21].vehicle+"")&&R(i,r)},d(o){o&&C(t)}}}function Rt(e){let t,l,n,s,r,i,o,u,a,f,h,y,m,p,_=e[21].units.length+"",M,g,A=e[8].units+"",L,x,O,H,D,b,N,P,K,J=e[14](e[21]),T=[];for(let w=0;w<J.length;w+=1)T[w]=Ft(Tt(e,J,w));let B=e[21].units.length>0&&Pt(e);function se(w,I){return I&160&&(h=null),h==null&&(h=!!he(w[21].units,w[7].citizenid)),h?nn:ln}let V=se(e,-1),E=V(e);function j(){return e[19](e[21])}return{c(){t=v("div"),l=v("div");for(let w=0;w<T.length;w+=1)T[w].c();n=$(),B&&B.c(),s=$(),r=v("button"),i=v("div"),o=v("i"),a=$(),f=v("span"),E.c(),y=$(),m=v("span"),p=S("("),M=S(_),g=$(),L=S(A),x=S(")"),O=$(),H=v("i"),d(l,"class","grid grid-cols-1 gap-[0.5vh] mb-[1vh] text-[1.1vh]"),d(o,"class",u="fas fa-"+(he(e[21].units,e[7].citizenid)?"unlink":"link")+" text-[1.1vh]"),d(m,"class","text-[1vh] opacity-75"),d(i,"class","flex items-center gap-[1vh]"),d(H,"class","fas fa-chevron-right text-[1vh]"),d(r,"class",D="w-full "+(e[21].priority==1?he(e[21].units,e[7].citizenid)?"bg-red-800 hover:bg-red-700":"bg-red-700 hover:bg-red-600":he(e[21].units,e[7].citizenid)?"bg-amber-700 hover:bg-amber-600":"bg-blue-700 hover:bg-blue-600")+" p-[1vh] transition-colors duration-200 text-white font-medium text-[1.2vh] flex items-center justify-between"),d(t,"class","border-t border-slate-700 bg-slate-800 px-[1.5vh] py-[1vh] svelte-1oyl3xv")},m(w,I){U(w,t,I),c(t,l);for(let k=0;k<T.length;k+=1)T[k]&&T[k].m(l,null);c(t,n),B&&B.m(t,null),c(t,s),c(t,r),c(r,i),c(i,o),c(i,a),c(i,f),E.m(f,null),c(i,y),c(i,m),c(m,p),c(m,M),c(m,g),c(m,L),c(m,x),c(r,O),c(r,H),N=!0,P||(K=ue(r,"click",j),P=!0)},p(w,I){if(e=w,I&16416){J=e[14](e[21]);let k;for(k=0;k<J.length;k+=1){const oe=Tt(e,J,k);T[k]?T[k].p(oe,I):(T[k]=Ft(oe),T[k].c(),T[k].m(l,null))}for(;k<T.length;k+=1)T[k].d(1);T.length=J.length}e[21].units.length>0?B?B.p(e,I):(B=Pt(e),B.c(),B.m(t,s)):B&&(B.d(1),B=null),(!N||I&160&&u!==(u="fas fa-"+(he(e[21].units,e[7].citizenid)?"unlink":"link")+" text-[1.1vh]"))&&d(o,"class",u),V===(V=se(e,I))&&E?E.p(e,I):(E.d(1),E=V(e),E&&(E.c(),E.m(f,null))),(!N||I&32)&&_!==(_=e[21].units.length+"")&&R(M,_),(!N||I&256)&&A!==(A=e[8].units+"")&&R(L,A),(!N||I&160&&D!==(D="w-full "+(e[21].priority==1?he(e[21].units,e[7].citizenid)?"bg-red-800 hover:bg-red-700":"bg-red-700 hover:bg-red-600":he(e[21].units,e[7].citizenid)?"bg-amber-700 hover:bg-amber-600":"bg-blue-700 hover:bg-blue-600")+" p-[1vh] transition-colors duration-200 text-white font-medium text-[1.2vh] flex items-center justify-between"))&&d(r,"class",D)},i(w){N||(ge(()=>{N&&(b||(b=Ie(t,Mt,{duration:300},!0)),b.run(1))}),N=!0)},o(w){b||(b=Ie(t,Mt,{duration:300},!1)),b.run(0),N=!1},d(w){w&&C(t),Ue(T,w),B&&B.d(),E.d(),w&&b&&b.end(),P=!1,K()}}}function xt(e){let t,l,n,s,r,i=e[27].label+"",o,u,a,f,h=e[27].value+"",y,m;return{c(){t=v("div"),l=v("i"),s=$(),r=v("span"),o=S(i),u=S(":"),a=$(),f=v("span"),y=S(h),m=$(),d(l,"class",n=e[27].icon+" text-blue-400 text-[1vh] w-[1.2vh] svelte-1oyl3xv"),d(r,"class","text-slate-500 min-w-[8vh]"),d(f,"class","text-slate-300"),d(t,"class","flex items-center gap-[1vh] py-[0.3vh]")},m(p,_){U(p,t,_),c(t,l),c(t,s),c(t,r),c(r,o),c(r,u),c(t,a),c(t,f),c(f,y),c(t,m)},p(p,_){_&32&&n!==(n=p[27].icon+" text-blue-400 text-[1vh] w-[1.2vh] svelte-1oyl3xv")&&d(l,"class",n),_&32&&i!==(i=p[27].label+"")&&R(o,i),_&32&&h!==(h=p[27].value+"")&&R(y,h)},d(p){p&&C(t)}}}function Ft(e){let t=e[27].value&&!["Time","Units"].includes(e[27].label),l,n=t&&xt(e);return{c(){n&&n.c(),l=je()},m(s,r){n&&n.m(s,r),U(s,l,r)},p(s,r){r&32&&(t=s[27].value&&!["Time","Units"].includes(s[27].label)),t?n?n.p(s,r):(n=xt(s),n.c(),n.m(l.parentNode,l)):n&&(n.d(1),n=null)},d(s){n&&n.d(s),s&&C(l)}}}function Pt(e){let t,l,n,s,r,i=e[21].units.length+"",o,u,a,f,h,y=e[21].units.slice(0,e[1][e[21].id]?e[21].units.length:3),m=[];for(let _=0;_<y.length;_+=1)m[_]=Bt(Ct(e,y,_));let p=e[21].units.length>3&&!e[1][e[21].id]&&Ot(e);return{c(){t=v("div"),l=v("div"),n=v("h4"),s=v("i"),r=S(`
                    ASSIGNED UNITS (`),o=S(i),u=S(")"),a=$(),f=v("div");for(let _=0;_<m.length;_+=1)m[_].c();h=$(),p&&p.c(),d(s,"class","fas fa-users text-[1vh]"),d(n,"class","text-slate-400 text-[1.1vh] font-medium mb-[0.5vh] flex items-center gap-[0.5vh]"),d(f,"class","space-y-[0.3vh] max-h-[15vh] overflow-y-auto"),d(l,"class","border-t border-slate-700 pt-[1vh]"),d(t,"class","mb-[1vh]")},m(_,M){U(_,t,M),c(t,l),c(l,n),c(n,s),c(n,r),c(n,o),c(n,u),c(l,a),c(l,f);for(let g=0;g<m.length;g+=1)m[g]&&m[g].m(f,null);c(f,h),p&&p.m(f,null)},p(_,M){if(M&32&&i!==(i=_[21].units.length+"")&&R(o,i),M&34){y=_[21].units.slice(0,_[1][_[21].id]?_[21].units.length:3);let g;for(g=0;g<y.length;g+=1){const A=Ct(_,y,g);m[g]?m[g].p(A,M):(m[g]=Bt(A),m[g].c(),m[g].m(f,h))}for(;g<m.length;g+=1)m[g].d(1);m.length=y.length}_[21].units.length>3&&!_[1][_[21].id]?p?p.p(_,M):(p=Ot(_),p.c(),p.m(f,null)):p&&(p.d(1),p=null)},d(_){_&&C(t),Ue(m,_),p&&p.d()}}}function Bt(e){let t,l,n=e[24].metadata.callsign+"",s,r,i,o=e[24].job.name+"",u,a,f,h,y=e[24].charinfo.firstname+"",m,p,_=e[24].charinfo.lastname+"",M;return{c(){t=v("div"),l=v("span"),s=S(n),r=$(),i=v("span"),u=S(o),f=$(),h=v("span"),m=S(y),p=$(),M=S(_),d(l,"class","px-[0.8vh] py-[0.2vh] bg-blue-600 text-white font-bold font-mono"),d(i,"class",a="px-[0.8vh] py-[0.2vh] uppercase text-white font-medium "+(e[24].job.type=="leo"?"bg-blue-700":e[24].job.type=="ems"?"bg-red-700":"bg-slate-600")),d(h,"class","text-slate-300 flex-1"),d(t,"class","bg-slate-700 p-[0.8vh] flex items-center gap-[1vh] text-[1vh]")},m(g,A){U(g,t,A),c(t,l),c(l,s),c(t,r),c(t,i),c(i,u),c(t,f),c(t,h),c(h,m),c(h,p),c(h,M)},p(g,A){A&34&&n!==(n=g[24].metadata.callsign+"")&&R(s,n),A&34&&o!==(o=g[24].job.name+"")&&R(u,o),A&34&&a!==(a="px-[0.8vh] py-[0.2vh] uppercase text-white font-medium "+(g[24].job.type=="leo"?"bg-blue-700":g[24].job.type=="ems"?"bg-red-700":"bg-slate-600"))&&d(i,"class",a),A&34&&y!==(y=g[24].charinfo.firstname+"")&&R(m,y),A&34&&_!==(_=g[24].charinfo.lastname+"")&&R(M,_)},d(g){g&&C(t)}}}function Ot(e){let t,l,n,s=Ht(e[21])+"",r,i,o,u;function a(){return e[18](e[21])}return{c(){t=v("button"),l=v("i"),n=S(`
                        Show `),r=S(s),i=S(" more units"),d(l,"class","fas fa-chevron-down mr-[0.5vh]"),d(t,"class","w-full bg-slate-600 hover:bg-slate-500 p-[0.5vh] transition-colors duration-200 text-slate-300 text-[1vh]")},m(f,h){U(f,t,h),c(t,l),c(t,n),c(t,r),c(t,i),o||(u=ue(t,"click",a),o=!0)},p(f,h){e=f,h&32&&s!==(s=Ht(e[21])+"")&&R(r,s)},d(f){f&&C(t),o=!1,u()}}}function ln(e){let t=e[8].dispatch_attach+"",l;return{c(){l=S(t)},m(n,s){U(n,l,s)},p(n,s){s&256&&t!==(t=n[8].dispatch_attach+"")&&R(l,t)},d(n){n&&C(l)}}}function nn(e){let t=e[8].dispatch_detach+"",l;return{c(){l=S(t)},m(n,s){U(n,l,s)},p(n,s){s&256&&t!==(t=n[8].dispatch_detach+"")&&R(l,t)},d(n){n&&C(l)}}}function Vt(e){let t,l,n,s,r,i,o=e[21].id+"",u,a,f,h=e[21].code+"",y,m,p,_,M,g,A,L,x,O,H,D,b,N,P=e[21].message+"",K,J,T,B,se,V=Qe(e[21].time)+"",E,j,w,I,k,oe,ce,$e,re,ve,me=e[21].units.length+"",X,z,Me,be,ht,He,Z,nt,vt,ee=e[21].street&&Ut(e),te=e[21].name&&jt(e),le=e[21].vehicle&&Lt(e);function hl(){return e[17](e[21])}let Y=e[0]===e[21].id&&Rt(e);return{c(){t=v("div"),l=v("div"),n=v("button"),s=v("div"),r=v("div"),i=S("#"),u=S(o),a=$(),f=v("div"),y=S(h),p=$(),_=v("div"),M=v("div"),g=v("i"),x=$(),O=v("i"),D=$(),b=v("div"),N=v("h3"),K=S(P),J=$(),T=v("p"),B=v("i"),se=$(),E=S(V),j=$(),w=v("div"),ee&&ee.c(),I=$(),te&&te.c(),k=$(),le&&le.c(),oe=$(),ce=v("div"),$e=v("i"),re=$(),ve=v("span"),X=S(me),z=S(" Units"),Me=$(),Y&&Y.c(),ht=$(),d(r,"class","px-[1vh] py-[0.3vh] bg-blue-600 text-white font-bold text-[1.2vh] font-mono rounded-lg"),d(f,"class",m="px-[1vh] py-[0.3vh] "+(e[21].priority==1?"bg-red-600":"bg-slate-700")+" text-white font-semibold text-[1.2vh] rounded-lg"),d(g,"class",A=Ye(e[21].icon)+" svelte-1oyl3xv"),d(M,"class",L=(e[21].priority==1?"text-red-400":"text-blue-400")+" text-[1.4vh]"),d(O,"class",H="fas fa-chevron-"+(e[0]===e[21].id?"up":"down")+" text-slate-500 text-[1vh]"),d(_,"class","ml-auto flex items-center gap-[1vh]"),d(s,"class","flex items-center gap-[1vh] mb-[1vh]"),d(N,"class","text-white text-[1.4vh] font-medium"),d(B,"class","fas fa-clock mr-[0.5vh]"),d(T,"class","text-slate-400 text-[1.1vh] mt-[0.3vh]"),d(b,"class","mb-[1vh]"),d($e,"class","fas fa-users text-[0.9vh] w-[1vh]"),d(ce,"class","flex items-center gap-[0.3vh]"),d(w,"class","grid grid-cols-2 gap-[0.5vh] text-[1vh] text-slate-400"),d(n,"class","w-full p-[1.5vh] text-left svelte-1oyl3xv"),d(l,"class",be=(e[21].priority==1?"emergency-overlay":"bg-slate-900 hover:bg-slate-800")+" transition-colors duration-200 svelte-1oyl3xv"),d(t,"class",He="mb-[1vh] "+(e[21].priority==1?"border-l-4 border-red-500":"border-l-4 border-blue-500"))},m(_e,W){U(_e,t,W),c(t,l),c(l,n),c(n,s),c(s,r),c(r,i),c(r,u),c(s,a),c(s,f),c(f,y),c(s,p),c(s,_),c(_,M),c(M,g),c(_,x),c(_,O),c(n,D),c(n,b),c(b,N),c(N,K),c(b,J),c(b,T),c(T,B),c(T,se),c(T,E),c(n,j),c(n,w),ee&&ee.m(w,null),c(w,I),te&&te.m(w,null),c(w,k),le&&le.m(w,null),c(w,oe),c(w,ce),c(ce,$e),c(ce,re),c(ce,ve),c(ve,X),c(ve,z),c(l,Me),Y&&Y.m(l,null),c(t,ht),Z=!0,nt||(vt=ue(n,"click",hl),nt=!0)},p(_e,W){e=_e,(!Z||W&32)&&o!==(o=e[21].id+"")&&R(u,o),(!Z||W&32)&&h!==(h=e[21].code+"")&&R(y,h),(!Z||W&32&&m!==(m="px-[1vh] py-[0.3vh] "+(e[21].priority==1?"bg-red-600":"bg-slate-700")+" text-white font-semibold text-[1.2vh] rounded-lg"))&&d(f,"class",m),(!Z||W&32&&A!==(A=Ye(e[21].icon)+" svelte-1oyl3xv"))&&d(g,"class",A),(!Z||W&32&&L!==(L=(e[21].priority==1?"text-red-400":"text-blue-400")+" text-[1.4vh]"))&&d(M,"class",L),(!Z||W&33&&H!==(H="fas fa-chevron-"+(e[0]===e[21].id?"up":"down")+" text-slate-500 text-[1vh]"))&&d(O,"class",H),(!Z||W&32)&&P!==(P=e[21].message+"")&&R(K,P),(!Z||W&32)&&V!==(V=Qe(e[21].time)+"")&&R(E,V),e[21].street?ee?ee.p(e,W):(ee=Ut(e),ee.c(),ee.m(w,I)):ee&&(ee.d(1),ee=null),e[21].name?te?te.p(e,W):(te=jt(e),te.c(),te.m(w,k)):te&&(te.d(1),te=null),e[21].vehicle?le?le.p(e,W):(le=Lt(e),le.c(),le.m(w,oe)):le&&(le.d(1),le=null),(!Z||W&32)&&me!==(me=e[21].units.length+"")&&R(X,me),e[0]===e[21].id?Y?(Y.p(e,W),W&33&&F(Y,1)):(Y=Rt(e),Y.c(),F(Y,1),Y.m(l,null)):Y&&(ye(),G(Y,1,1,()=>{Y=null}),we()),(!Z||W&32&&be!==(be=(e[21].priority==1?"emergency-overlay":"bg-slate-900 hover:bg-slate-800")+" transition-colors duration-200 svelte-1oyl3xv"))&&d(l,"class",be),(!Z||W&32&&He!==(He="mb-[1vh] "+(e[21].priority==1?"border-l-4 border-red-500":"border-l-4 border-blue-500")))&&d(t,"class",He)},i(_e){Z||(F(Y),Z=!0)},o(_e){G(Y),Z=!1},d(_e){_e&&C(t),ee&&ee.d(),te&&te.d(),le&&le.d(),Y&&Y.d(),nt=!1,vt()}}}function sn(e){var me;let t,l,n,s,r,i,o,u,a,f,h,y,m,p,_,M,g,A,L,x,O,H,D,b,N,P,K,J,T=(((me=e[5])==null?void 0:me.length)||0)+"",B,se,V,E,j,w,I,k,oe,ce;const $e=[tn,en],re=[];function ve(X,z){return X[6]&&X[5].length>0?0:1}return E=ve(e),j=re[E]=$e[E](e),{c(){t=v("div"),l=v("div"),n=v("button"),n.innerHTML='<i class="fas fa-arrows-rotate text-[1.6vh]"></i>',s=$(),r=v("button"),i=v("i"),f=$(),h=v("button"),y=v("i"),M=$(),g=v("button"),g.innerHTML='<i class="fas fa-ban text-[1.6vh]"></i>',A=$(),L=v("button"),x=v("i"),H=$(),D=v("div"),b=v("div"),N=v("div"),P=v("h1"),P.innerHTML=`<i class="fas fa-radio text-blue-400 text-[1.6vh]"></i>
          ACTIVE DISPATCHES`,K=$(),J=v("div"),B=S(T),se=$(),V=v("div"),j.c(),d(n,"class","w-full h-[4vh] flex items-center justify-center bg-slate-800 hover:bg-blue-600 text-slate-300 hover:text-white rounded-lg transition-all duration-200 border border-slate-700 hover:border-blue-500"),d(n,"title","Refresh Alerts"),d(i,"class",o="fas fa-volume-"+(e[4]?"xmark":"high")+" text-[1.6vh]"),d(r,"class",u="w-full h-[4vh] flex items-center justify-center "+(e[4]?"bg-red-900 hover:bg-red-800 border-red-800 hover:border-red-700":"bg-slate-800 hover:bg-blue-600 border-slate-700 hover:border-blue-500")+" text-slate-300 hover:text-white rounded-lg transition-all duration-200 border"),d(r,"title",a=e[4]?"Unmute Dispatch":"Mute Dispatch"),d(y,"class",m="fas fa-"+(e[3]?"bell-slash":"bell")+" text-[1.6vh]"),d(h,"class",p="w-full h-[4vh] flex items-center justify-center "+(e[3]?"bg-amber-900 hover:bg-amber-800 border-amber-800 hover:border-amber-700":"bg-slate-800 hover:bg-blue-600 border-slate-700 hover:border-blue-500")+" text-slate-300 hover:text-white rounded-lg transition-all duration-200 border"),d(h,"title",_=e[3]?"Enable Alerts":"Disable Alerts"),d(g,"class","w-full h-[4vh] flex items-center justify-center bg-slate-800 hover:bg-blue-600 text-slate-300 hover:text-white rounded-lg transition-all duration-200 border border-slate-700 hover:border-blue-500"),d(g,"title","Clear Map Blips"),d(x,"class",O="fas fa-"+(e[2]?"hand-point-left":"hand-point-right")+" text-[1.6vh]"),d(L,"class","w-full h-[4vh] flex items-center justify-center bg-slate-800 hover:bg-blue-600 text-slate-300 hover:text-white rounded-lg transition-all duration-200 border border-slate-700 hover:border-blue-500"),d(L,"title","Toggle Position"),d(l,"class","w-[4vh] h-[85%] flex flex-col gap-[1vh]"),ie(l,"ml-[1vh]",!e[2]),ie(l,"mr-[1vh]",e[2]),d(P,"class","text-white font-semibold text-[1.8vh] flex items-center gap-[1vh]"),d(J,"class","text-blue-400 text-[1.2vh] font-mono"),d(N,"class","flex items-center justify-between"),d(b,"class","bg-slate-900 border-l-4 border-blue-500 p-[1.5vh] mb-[1vh]"),d(V,"class","h-[calc(100%-6vh)] overflow-y-auto pr-[0.5vh]"),d(D,"class","w-[28%] h-[97%] overflow-hidden"),ie(D,"ml-[2vh]",!e[2]),ie(D,"mr-[2vh]",e[2]),d(t,"class",w="w-screen h-screen flex items-center justify-end "+(e[2]?"flex-row":"flex-row-reverse"))},m(X,z){U(X,t,z),c(t,l),c(l,n),c(l,s),c(l,r),c(r,i),c(l,f),c(l,h),c(h,y),c(l,M),c(l,g),c(l,A),c(l,L),c(L,x),c(t,H),c(t,D),c(D,b),c(b,N),c(N,P),c(N,K),c(N,J),c(J,B),c(D,se),c(D,V),re[E].m(V,null),k=!0,oe||(ce=[ue(n,"click",e[15]),ue(r,"click",e[12]),ue(h,"click",e[13]),ue(g,"click",e[16]),ue(L,"click",e[11])],oe=!0)},p(X,[z]){var be;e=X,(!k||z&16&&o!==(o="fas fa-volume-"+(e[4]?"xmark":"high")+" text-[1.6vh]"))&&d(i,"class",o),(!k||z&16&&u!==(u="w-full h-[4vh] flex items-center justify-center "+(e[4]?"bg-red-900 hover:bg-red-800 border-red-800 hover:border-red-700":"bg-slate-800 hover:bg-blue-600 border-slate-700 hover:border-blue-500")+" text-slate-300 hover:text-white rounded-lg transition-all duration-200 border"))&&d(r,"class",u),(!k||z&16&&a!==(a=e[4]?"Unmute Dispatch":"Mute Dispatch"))&&d(r,"title",a),(!k||z&8&&m!==(m="fas fa-"+(e[3]?"bell-slash":"bell")+" text-[1.6vh]"))&&d(y,"class",m),(!k||z&8&&p!==(p="w-full h-[4vh] flex items-center justify-center "+(e[3]?"bg-amber-900 hover:bg-amber-800 border-amber-800 hover:border-amber-700":"bg-slate-800 hover:bg-blue-600 border-slate-700 hover:border-blue-500")+" text-slate-300 hover:text-white rounded-lg transition-all duration-200 border"))&&d(h,"class",p),(!k||z&8&&_!==(_=e[3]?"Enable Alerts":"Disable Alerts"))&&d(h,"title",_),(!k||z&4&&O!==(O="fas fa-"+(e[2]?"hand-point-left":"hand-point-right")+" text-[1.6vh]"))&&d(x,"class",O),(!k||z&4)&&ie(l,"ml-[1vh]",!e[2]),(!k||z&4)&&ie(l,"mr-[1vh]",e[2]),(!k||z&32)&&T!==(T=(((be=e[5])==null?void 0:be.length)||0)+"")&&R(B,T);let Me=E;E=ve(e),E===Me?re[E].p(e,z):(ye(),G(re[Me],1,1,()=>{re[Me]=null}),we(),j=re[E],j?j.p(e,z):(j=re[E]=$e[E](e),j.c()),F(j,1),j.m(V,null)),(!k||z&4)&&ie(D,"ml-[2vh]",!e[2]),(!k||z&4)&&ie(D,"mr-[2vh]",e[2]),(!k||z&4&&w!==(w="w-screen h-screen flex items-center justify-end "+(e[2]?"flex-row":"flex-row-reverse")))&&d(t,"class",w)},i(X){k||(F(j),ge(()=>{k&&(I||(I=Ie(t,Ze,{x:e[2]?400:-400},!0)),I.run(1))}),k=!0)},o(X){G(j),I||(I=Ie(t,Ze,{x:e[2]?400:-400},!1)),I.run(0),k=!1},d(X){X&&C(t),re[E].d(),X&&I&&I.end(),oe=!1,de(ce)}}}function he(e,t){for(let l=0;l<e.length;l++)if(e[l].citizenid===t)return!0;return!1}function Ht(e){const l=e.units.length-3;return Math.max(0,l)}function rn(e,t,l){let n,s,r,i,o,u,a;Q(e,wt,b=>l(3,s=b)),Q(e,yt,b=>l(4,r=b)),Q(e,kt,b=>l(5,i=b)),Q(e,Ke,b=>l(6,o=b)),Q(e,qe,b=>l(7,u=b)),Q(e,Xe,b=>l(8,a=b));let f=null,h={},y;tt(()=>{y=at.subscribe(b=>{l(2,n=b)}),Ke.subscribe(b=>{console.log("DISPATCH_MENU updated:",b)}),qe.subscribe(b=>{console.log("PLAYER updated:",b)}),Xe.subscribe(b=>{console.log("Locale updated:",b)}),kt.subscribe(b=>{console.log("processedDispatchMenu updated:",b)})}),rl(()=>{y()});function m(b){f===b?l(0,f=null):l(0,f=b)}function p(b){l(1,h[b]=!h[b],h)}function _(){l(2,n=!n),at.set(n)}function M(){yt.update(b=>!b),ae("toggleMute",{boolean:r})}function g(){wt.update(b=>!b),ae("toggleAlerts",{boolean:s})}function A(b){return[{icon:"fas fa-clock",label:"Time",value:Qe(b.time)},{icon:"fas fa-user",label:"Name",value:b.name},{icon:"fas fa-phone",label:"Number",value:b.number},{icon:"fas fa-comment",label:"Information",value:b.information},{icon:"fas fa-map-location-dot",label:"Street",value:b.street},{icon:"fas fa-user",label:"Gender",value:b.gender},{icon:"fas fa-gun",label:"Automatic Gun Fire",value:b.automaticGunFire},{icon:"fas fa-gun",label:"Weapon",value:b.weapon},{icon:"fas fa-car",label:"Vehicle",value:b.vehicle},{icon:"fas fa-rectangle-list",label:"Plate",value:b.plate},{icon:"fas fa-droplet",label:"Color",value:b.color},{icon:"fas fa-car",label:"Class",value:b.class},{icon:"fas fa-door-open",label:"Doors",value:b.doors},{icon:"fas fa-compass",label:"Heading",value:b.heading},{icon:"fas fa-user-group",label:"Units",value:b.units.length}]}const L=()=>{ae("refreshAlerts")},x=()=>{ae("clearBlips")},O=b=>m(b.id),H=b=>p(b.id),D=b=>{he(b.units,u.citizenid)?(ae("detachUnit",b),ae("refreshAlerts")):(ae("attachUnit",b),ae("refreshAlerts"))};return l(2,n=!1),[f,h,n,s,r,i,o,u,a,m,p,_,M,g,A,L,x,O,H,D]}class on extends Re{constructor(t){super(),Le(this,t,rn,sn,ke,{})}}function zt(e,t,l){const n=e.slice();return n[6]=t[l],n[8]=l,n}function Gt(e,t,l){const n=e.slice();return n[9]=t[l],n}function Yt(e){let t,l=e[3](e[6]),n=[];for(let s=0;s<l.length;s+=1)n[s]=Jt(Gt(e,l,s));return{c(){for(let s=0;s<n.length;s+=1)n[s].c();t=je()},m(s,r){for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(s,r);U(s,t,r)},p(s,r){if(r&9){l=s[3](s[6]);let i;for(i=0;i<l.length;i+=1){const o=Gt(s,l,i);n[i]?n[i].p(o,r):(n[i]=Jt(o),n[i].c(),n[i].m(t.parentNode,t))}for(;i<n.length;i+=1)n[i].d(1);n.length=l.length}},d(s){Ue(n,s),s&&C(t)}}}function Wt(e){let t,l,n,s,r,i=e[9].label+"",o,u,a,f,h=e[9].value+"",y,m;return{c(){t=v("div"),l=v("i"),s=$(),r=v("span"),o=S(i),u=S(":"),a=$(),f=v("span"),y=S(h),m=$(),d(l,"class",n=e[9].icon+" text-blue-400 text-[1vh] w-[1.2vh] svelte-1oyl3xv"),d(r,"class","text-slate-500 min-w-[6vh]"),d(f,"class","text-slate-300"),d(t,"class","flex items-center gap-[0.5vh] text-slate-400")},m(p,_){U(p,t,_),c(t,l),c(t,s),c(t,r),c(r,o),c(r,u),c(t,a),c(t,f),c(f,y),c(t,m)},p(p,_){_&1&&n!==(n=p[9].icon+" text-blue-400 text-[1vh] w-[1.2vh] svelte-1oyl3xv")&&d(l,"class",n),_&1&&i!==(i=p[9].label+"")&&R(o,i),_&1&&h!==(h=p[9].value+"")&&R(y,h)},d(p){p&&C(t)}}}function Jt(e){let t,l=e[9].value&&Wt(e);return{c(){l&&l.c(),t=je()},m(n,s){l&&l.m(n,s),U(n,t,s)},p(n,s){n[9].value?l?l.p(n,s):(l=Wt(n),l.c(),l.m(t.parentNode,t)):l&&(l.d(1),l=null)},d(n){l&&l.d(n),n&&C(t)}}}function qt(e){let t,l,n,s;return{c(){t=v("div"),l=S("["),n=S(e[2]),s=S("] Respond"),d(t,"class","bg-blue-700 hover:bg-blue-600 text-white px-[1.5vh] py-[0.6vh] text-[1.2vh] font-medium transition-colors duration-200")},m(r,i){U(r,t,i),c(t,l),c(t,n),c(t,s)},p(r,i){i&4&&R(n,r[2])},d(r){r&&C(t)}}}function Kt(e,t){let l,n,s,r,i,o=t[6].data.id+"",u,a,f,h=t[6].data.code+"",y,m,p,_,M,g=t[6].data.message+"",A,L,x,O,H,D,b,N,P,K,J,T,B,se,V,E,j=t[6].data&&Yt(t),w=t[8]===0&&qt(t);return{key:e,first:null,c(){l=v("div"),n=v("div"),s=v("div"),r=v("div"),i=S("#"),u=S(o),a=$(),f=v("div"),y=S(h),p=$(),_=v("div"),M=v("h3"),A=S(g),L=$(),x=v("div"),O=v("i"),N=$(),P=v("div"),K=v("div"),j&&j.c(),J=$(),T=v("div"),w&&w.c(),B=$(),d(r,"class","px-[1vh] py-[0.3vh] bg-blue-600 text-white font-bold text-[1.2vh] font-mono rounded-lg"),d(f,"class",m="px-[1vh] py-[0.3vh] "+(t[6].data.priority==1?"bg-red-600":"bg-slate-700")+" text-white font-semibold text-[1.2vh] rounded-lg"),d(M,"class","text-white text-[1.4vh] font-medium"),d(_,"class","flex-1"),d(O,"class",H=Ye(t[6].data.icon)+" svelte-1oyl3xv"),d(x,"class",D=(t[6].data.priority==1?"text-red-400":"text-blue-400")+" text-[1.4vh]"),d(s,"class","flex items-center gap-[1vh] svelte-1oyl3xv"),d(n,"class",b=(t[6].data.priority==1?"emergency-overlay":"bg-slate-800")+" p-[1.5vh] border-b "+(t[6].data.priority==1?"emergency-overlay":"border-slate-700")+" svelte-1oyl3xv"),d(K,"class","flex flex-col p-[1.5vh] gap-y-[0.5vh] text-[1.1vh] w-[70%]"),d(T,"class","w-[30%] flex items-end justify-center p-[1.5vh]"),d(P,"class","flex svelte-1oyl3xv"),d(l,"class",se="w-full h-fit my-[0.5vh] "+(t[6].data.priority==1?"border-l-4 emergency-overlay":"border-l-4 border-blue-500")+" "+(t[6].data.priority==1?"emergency-overlay":"bg-slate-900 hover:bg-slate-800")+" transition-colors duration-200 svelte-1oyl3xv"),this.first=l},m(I,k){U(I,l,k),c(l,n),c(n,s),c(s,r),c(r,i),c(r,u),c(s,a),c(s,f),c(f,y),c(s,p),c(s,_),c(_,M),c(M,A),c(s,L),c(s,x),c(x,O),c(l,N),c(l,P),c(P,K),j&&j.m(K,null),c(P,J),c(P,T),w&&w.m(T,null),c(l,B),E=!0},p(I,k){t=I,(!E||k&1)&&o!==(o=t[6].data.id+"")&&R(u,o),(!E||k&1)&&h!==(h=t[6].data.code+"")&&R(y,h),(!E||k&1&&m!==(m="px-[1vh] py-[0.3vh] "+(t[6].data.priority==1?"bg-red-600":"bg-slate-700")+" text-white font-semibold text-[1.2vh] rounded-lg"))&&d(f,"class",m),(!E||k&1)&&g!==(g=t[6].data.message+"")&&R(A,g),(!E||k&1&&H!==(H=Ye(t[6].data.icon)+" svelte-1oyl3xv"))&&d(O,"class",H),(!E||k&1&&D!==(D=(t[6].data.priority==1?"text-red-400":"text-blue-400")+" text-[1.4vh]"))&&d(x,"class",D),(!E||k&1&&b!==(b=(t[6].data.priority==1?"emergency-overlay":"bg-slate-800")+" p-[1.5vh] border-b "+(t[6].data.priority==1?"emergency-overlay":"border-slate-700")+" svelte-1oyl3xv"))&&d(n,"class",b),t[6].data?j?j.p(t,k):(j=Yt(t),j.c(),j.m(K,null)):j&&(j.d(1),j=null),t[8]===0?w?w.p(t,k):(w=qt(t),w.c(),w.m(T,null)):w&&(w.d(1),w=null),(!E||k&1&&se!==(se="w-full h-fit my-[0.5vh] "+(t[6].data.priority==1?"border-l-4 emergency-overlay":"border-l-4 border-blue-500")+" "+(t[6].data.priority==1?"emergency-overlay":"bg-slate-900 hover:bg-slate-800")+" transition-colors duration-200 svelte-1oyl3xv"))&&d(l,"class",se)},i(I){E||(ge(()=>{E&&(V||(V=Ie(l,Ze,{x:t[1]?400:-400},!0)),V.run(1))}),E=!0)},o(I){V||(V=Ie(l,Ze,{x:t[1]?400:-400},!1)),V.run(0),E=!1},d(I){I&&C(l),j&&j.d(),w&&w.d(),I&&V&&V.end()}}}function an(e){let t,l,n=[],s=new Map,r,i,o=e[0].slice().reverse();const u=a=>a[6].data.id;for(let a=0;a<o.length;a+=1){let f=zt(e,o,a),h=u(f);s.set(h,n[a]=Kt(h,f))}return{c(){t=v("div"),l=v("div");for(let a=0;a<n.length;a+=1)n[a].c();d(l,"class","w-[28%] h-[97%]"),ie(l,"ml-[2vh]",!e[1]),ie(l,"mr-[2vh]",e[1]),d(t,"class",r="w-screen h-screen flex justify-end "+(e[1]?"flex-row":"flex-row-reverse")+" items-end")},m(a,f){U(a,t,f),c(t,l);for(let h=0;h<n.length;h+=1)n[h]&&n[h].m(l,null);i=!0},p(a,[f]){f&15&&(o=a[0].slice().reverse(),ye(),n=Pl(n,f,u,1,a,o,s,l,Fl,Kt,null,zt),we()),(!i||f&2)&&ie(l,"ml-[2vh]",!a[1]),(!i||f&2)&&ie(l,"mr-[2vh]",a[1]),(!i||f&2&&r!==(r="w-screen h-screen flex justify-end "+(a[1]?"flex-row":"flex-row-reverse")+" items-end"))&&d(t,"class",r)},i(a){if(!i){for(let f=0;f<o.length;f+=1)F(n[f]);i=!0}},o(a){for(let f=0;f<n.length;f+=1)G(n[f]);i=!1},d(a){a&&C(t);for(let f=0;f<n.length;f+=1)n[f].d()}}}function un(e,t,l){let n,s,r;Q(e,cl,a=>l(4,n=a)),Q(e,at,a=>l(1,s=a)),Q(e,ul,a=>l(2,r=a));let i=[];dt.subscribe(a=>{l(0,i=a||[])});function o(a){Hl(a)}tt(()=>{i.forEach(a=>{const{data:f,timer:h}=a;setTimeout(()=>{o(f.id)},h)})}),Cl(()=>{i.forEach(a=>{const{data:f,timer:h}=a;setTimeout(()=>{o(f.id)},h)})});function u(a){return n?[{label:"Call",value:a.data.message},{icon:"fas fa-comment",label:"Information",value:a.data.information}]:[{icon:"fas fa-clock",label:"Time",value:Qe(a.data.time)},{icon:"fas fa-user",label:"Name",value:a.data.name},{icon:"fas fa-phone",label:"Number",value:a.data.number},{icon:"fas fa-comment",label:"Information",value:a.data.information},{icon:"fas fa-map-location-dot",label:"Street",value:a.data.street},{icon:"fas fa-user",label:"Gender",value:a.data.gender},{icon:"fas fa-gun",label:"Automatic Gun Fire",value:a.data.automaticGunFire},{icon:"fas fa-gun",label:"Weapon",value:a.data.weapon},{icon:"fas fa-car",label:"Vehicle",value:a.data.vehicle},{icon:"fas fa-rectangle-list",label:"Plate",value:a.data.plate},{icon:"fas fa-droplet",label:"Color",value:a.data.color},{icon:"fas fa-car",label:"Class",value:a.data.class},{icon:"fas fa-door-open",label:"Doors",value:a.data.doors},{icon:"fas fa-compass",label:"Heading",value:a.data.heading}]}return[i,s,r,u]}class cn extends Re{constructor(t){super(),Le(this,t,un,an,ke,{})}}function Xt(e){let t,l,n,s;return t=new Yl({props:{$$slots:{default:[fn]},$$scope:{ctx:e}}}),n=new cn({}),{c(){Ve(t.$$.fragment),l=$(),Ve(n.$$.fragment)},m(r,i){Ce(t,r,i),U(r,l,i),Ce(n,r,i),s=!0},i(r){s||(F(t.$$.fragment,r),F(n.$$.fragment,r),s=!0)},o(r){G(t.$$.fragment,r),G(n.$$.fragment,r),s=!1},d(r){Te(t,r),r&&C(l),Te(n,r)}}}function fn(e){let t,l;return t=new on({}),{c(){Ve(t.$$.fragment)},m(n,s){Ce(t,n,s),l=!0},i(n){l||(F(t.$$.fragment,n),l=!0)},o(n){G(t.$$.fragment,n),l=!1},d(n){Te(t,n)}}}function Zt(e){let t,l,n,s;return t=new Kl({}),{c(){Ve(t.$$.fragment),l=$(),n=v("body"),d(n,"class","bg-neutral-700")},m(r,i){Ce(t,r,i),U(r,l,i),U(r,n,i),s=!0},i(r){s||(F(t.$$.fragment,r),s=!0)},o(r){G(t.$$.fragment,r),s=!1},d(r){Te(t,r),r&&C(l),r&&C(n)}}}function dn(e){let t,l,n,s,r,i=e[0]&&Xt(e);l=new Zl({});let o=e[1]&&Zt();return{c(){i&&i.c(),t=$(),Ve(l.$$.fragment),n=$(),o&&o.c(),s=je()},m(u,a){i&&i.m(u,a),U(u,t,a),Ce(l,u,a),U(u,n,a),o&&o.m(u,a),U(u,s,a),r=!0},p(u,[a]){u[0]?i?a&1&&F(i,1):(i=Xt(u),i.c(),F(i,1),i.m(t.parentNode,t)):i&&(ye(),G(i,1,1,()=>{i=null}),we()),u[1]?o?a&2&&F(o,1):(o=Zt(),o.c(),F(o,1),o.m(s.parentNode,s)):o&&(ye(),G(o,1,1,()=>{o=null}),we())},i(u){r||(F(i),F(l.$$.fragment,u),F(o),r=!0)},o(u){G(i),G(l.$$.fragment,u),G(o),r=!1},d(u){i&&i.d(u),u&&C(t),Te(l,u),u&&C(n),o&&o.d(u),u&&C(s)}}}function hn(e,t,l){let n,s,r;return Q(e,ot,i=>l(2,n=i)),Q(e,Xe,i=>l(0,s=i)),Q(e,lt,i=>l(1,r=i)),ll(ot,n="ps-dispatch",n),[s,r]}class vn extends Re{constructor(t){super(),Le(this,t,hn,dn,ke,{})}}new vn({target:document.getElementById("app")});
